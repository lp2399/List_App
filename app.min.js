const form=document.querySelector("#task-form"),taskList=document.querySelector(".task-list"),clearTaskButton=document.querySelector(".clear-tasks"),filter=document.querySelector("#filter"),inputField=document.querySelector("#input-field"),buttonOpen=document.querySelector("#button-open"),buttonClose=document.querySelector("#exit");function initiateEventListeners(){form.addEventListener("submit",addTask),taskList.addEventListener("click",removeTask),clearTaskButton.addEventListener("click",clearTasks),filter.addEventListener("keyup",filterTasks),checkOff(),fadeEffect(),dragListItems()}function addTask(e){if(inputField.value&&0!==inputField.value.length){{const t=document.createElement("li");t.className="list-item draggable",t.setAttribute("draggable","true"),t.appendChild(document.createTextNode(inputField.value));const n=document.createElement("a");n.className="delete-item",n.innerHTML=' <i class =" fas fa-trash-alt hide"></li> ',t.appendChild(n),taskList.appendChild(t),inputField.value="",e.preventDefault()}initiateEventListeners()}else e.preventDefault()}function removeTask(e){e.target.parentElement.classList.contains("delete-item")&&e.target.parentElement.parentElement.remove(),checkOff()}function clearTasks(e){let t=document.querySelector("#clearTasks-action"),n=document.querySelector("#confirm"),i=document.querySelector("#cancel");t.style.display="block",e.preventDefault(),container.style.display="none",n.addEventListener("click",function(e){for(;taskList.firstChild;)taskList.removeChild(taskList.firstChild);t.style.display="none",container.style.display="block"}),i.addEventListener("click",function(){t.style.display="none",container.style.display="block"})}function filterTasks(e){const t=e.target.value.toLowerCase();document.querySelectorAll(".list-item").forEach(function(e){-1!=e.firstChild.textContent.toLowerCase().indexOf(t)?e.style.display="block":e.style.display="none"})}function checkOff(){let e=document.querySelectorAll(".list-item");for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.classList.toggle("completed")})}initiateEventListeners(),checkOff();const container=document.querySelector(".container"),move=document.querySelector("#move");function mouseDown(e){if(e.target!=move)return;window.addEventListener("mousemove",l),window.addEventListener("mousemove",r),window.addEventListener("mouseup",function e(){window.removeEventListener("mousemove",l);window.removeEventListener("mousemove",r);window.removeEventListener("mouseup",e);initiateEventListeners()});let t=0,n=0,i=0,o=0;function l(e){t=i-e.clientX,container.style.left=container.offsetLeft-t+"px",i=e.clientX}function r(e){n=o-e.clientY,container.style.top=container.offsetTop-n+"px",o=e.clientY}i=e.clientX,o=e.clientY}function fadeEffect(){let e=document.querySelectorAll(".list-item"),t=document.querySelectorAll(".fa-trash-alt");for(let n=0;n<e.length;n++)e[n].addEventListener("mouseenter",function(){setTimeout(function(){t[n].classList.remove("hide"),t[n].classList.add("show")},200)}),e[n].addEventListener("mouseleave",function(){setTimeout(function(){t[n].classList.add("hide")},200)})}function dragListItems(){let e=null,t=document.querySelectorAll(".list-item");for(let i=0;i<t.length;i++)t[i].addEventListener("dragover",function(t){n(e,t.target)?t.target.parentNode.insertBefore(e,t.target):t.target.parentNode.insertBefore(e,t.target.nextSibling)}),t[i].addEventListener("dragstart",function(t){t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",null),e=t.target}),t[i].addEventListener("dragend",function(){e=null});function n(e,t){let n;if(t.parentNode===e.parentNode)for(n=e.previousSibling;n;n=n.previousSibling)if(n===t)return!0;return!1}}move.addEventListener("mousedown",mouseDown),buttonOpen.addEventListener("click",function(){container.style.display="block"}),buttonClose.addEventListener("click",function(){container.style.display="none"});